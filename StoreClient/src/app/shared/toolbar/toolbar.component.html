<div class="m-3 w-auto navbar bg-white shadow-sm rounded-lg">
  @if (isInSearch) {
    <button class="btn btn-ghost border-gray-400 border-opacity-50 mr-3" (click)="navigateToMainPage()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-5 h-5"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"
        />
      </svg>
    </button>
  }

  <div class="ml-3 mr-4 text-[1.3em] font-semibold pointer-events-none">{{currentModule}}</div>

  @if (currentModule !== 'Dashboard') {
    <button
      class="btn ml-1 pr-2.5 pl-1.5 btn-sm -mb-1 opacity-90 bg-success text-white hover:text-black"
      (click)="openFormDialog()"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-5 h-5 -mr-1.5"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
      </svg>
      Add
    </button>

    <div class="join ml-auto mr-5">
      <input class="input input-md input-bordered join-item" placeholder="Search" #txtSearch/>

      <select class="select select-bordered join-item" #txtFilter>
        @if (currentModule === 'Employees') {
          <option value="empno">EmpNo</option>
          <option value="name">Name</option>
          <option value="nic">Nic</option>
        }
      </select>

      <button class="btn join-item border-gray-300" (click)="handleSearch(txtSearch.value, txtFilter.value)">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
          />
        </svg>
      </button>
    </div>
  }

  <div class="indicator mr-8 cursor-pointer mt-2 {{currentModule === 'Dashboard'? 'ml-auto' : ''}}">
    <span class="indicator-item badge badge-error text-white px-1.5 -mt-0.5 bg-opacity-90">9</span>

    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="w-6 h-6"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"
      />
    </svg>
  </div>

  <div class="dropdown dropdown-end">
    <div tabindex="0" role="button" class="flex items-center">
      <div>
        <span class="mr-1.5 flex items-center text-gray-600 font-semibold text-sm">
        {{user.username.charAt(0).toUpperCase() + user.username.slice(1)}}

          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-3 h-3 ml-0.5 mt-1"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"
            />
          </svg>
        </span>

        <span class="block text-xs -mt-1 text-gray-400">{{userRole}}</span>
      </div>

      <div class="avatar online mr-2">
        <div class="w-10 rounded-full">
          <img src="data:image/jpeg;base64,{{user.employee.photo}}" alt="user-profile-img"/>
        </div>
      </div>
    </div>

    <ul tabindex="0" class="dropdown-content z-[1] menu py-2 bg-base-100 rounded-lg w-auto mt-5 shadow-sm border">
      <li>
        <a>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
            />
          </svg>

          Account
        </a>
      </li>

      <li>
        <a (click)="logOut()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"
            />
          </svg>

          Log out
        </a>
      </li>
    </ul>
  </div>
</div>
